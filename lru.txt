import
 
java
.
util
.*
;
 
public
 
class
 
LRU
 {
 
    
public
 
static
 
void
 
main
(
String
[] 
args
) {
 
        
Scanner
 
sc
 
=
 
new
 
Scanner
(
System
.
in
);
 
        
System
.
out
.
print
(
"Enter number of pages: "
);
 
        
int
 
n
 
=
 
sc
.
nextInt
();
 
        
int
 
pages
[] 
=
 
new
 
int
[
n
];
 
        
System
.
out
.
println
(
"Enter page reference string:"
);
 
        
for
 (
int
 
i
 
=
 
0
; 
i
 
<
 
n
; 
i
++
) 
pages
[
i
] 
=
 
sc
.
nextInt
();
 
        
System
.
out
.
print
(
"Enter frame capacity: "
);
 
        
int
 
cap
 
=
 
sc
.
nextInt
();
 
        
List
<
Integer
> 
frames
 
=
 
new
 
ArrayList
<>(); 
// Holds pages 
in LRU order
 
        
int
 
pageFaults
 
=
 
0
;
 
        
System
.
out
.
println
(
"
\n
--- LRU Page Replacement ---"
);
 
        
for
 (
int
 
i
 
=
 
0
; 
i
 
<
 
n
; 
i
++
) {
 
            
int
 
page
 
=
 
pages
[
i
];
 
            
// If page is already in frame -> HIT
 
            
if
 (
frames
.
contains
(
page
)) {
 
                
// Move page to the end (most recently used)
 
                
frames
.
remove
((
Integer
) 
page
);
 
                
frames
.
add
(
page
);
 
                
System
.
out
.
println
(
"Step "
 
+
 (
i
 
+
 
1
) 
+
 
" -> 
Frames: "
 
+
 
frames
 
+
 
"  (Hit)"
);
 
            } 
 
            
else
 {
 
                
// Page Fault
 
                
if
 (
frames
.
size
() 
==
 
cap
) {
 
                    
// Remove least recently used (first element)
 
                    
frames
.
remove
(
0
);
 
                }
 
                
// Add new page
 
                
frames
.
add
(
page
);
 
                
pageFaults
++
;
 
                
System
.
out
.
println
(
"Step "
 
+
 (
i
 
+
 
1
) 
+
 
" -> 
Frames: "
 
+
 
frames
 
+
 
"  (Fault)"
);
 
            }
 
        }
 
        
System
.
out
.
println
(
"
\n
Total Page Faults = "
 
+
 
pageFaults
);
 
        
sc
.
close
();
 
    }
 
}
 


